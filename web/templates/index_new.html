<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anomaly Detection System</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --danger-color: #ff6b6b;
            --success-color: #28a745;
            --warning-color: #ffc107;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            transition: background 0.3s;
        }
        
        body.dark-mode {
            background: #1a1a2e;
            color: #fff;
        }
        
        nav {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        nav.dark-mode {
            background: #16213e;
        }
        
        .nav-left {
            font-size: 1.3em;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .nav-right {
            display: flex;
            gap: 15px;
        }
        
        .theme-toggle {
            background: none;
            border: none;
            font-size: 1.3em;
            cursor: pointer;
            padding: 5px 10px;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        
        body.dark-mode .card {
            background: #16213e;
        }
        
        .card:hover {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            transform: translateY(-5px);
        }
        
        .card h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }
        
        body.dark-mode .card h2 {
            color: #fff;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        body.dark-mode .metric {
            border-bottom-color: #444;
        }
        
        .metric:last-child {
            border-bottom: none;
        }
        
        .metric-label {
            color: #666;
            font-weight: 500;
        }
        
        body.dark-mode .metric-label {
            color: #aaa;
        }
        
        .metric-value {
            color: var(--primary-color);
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .metric-value.alert {
            color: var(--danger-color);
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            background: var(--success-color);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .header {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }
        
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
        }
        
        .stats-grid {
            grid-column: 1 / -1;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            border-radius: 10px;
        }
        
        body.dark-mode .stat-card {
            background: rgba(102, 126, 234, 0.1);
        }
        
        .stat-card.danger {
            border-left-color: var(--danger-color);
        }
        
        .stat-card h3 {
            color: var(--primary-color);
            font-size: 0.9em;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 10px;
        }
        
        .stat-card .value {
            font-size: 2.5em;
            font-weight: 700;
            color: #333;
        }
        
        body.dark-mode .stat-card .value {
            color: #fff;
        }
        
        .chart-container {
            grid-column: 1 / -1;
            position: relative;
            height: 300px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        body.dark-mode .chart-container {
            background: #16213e;
        }
        
        .refresh-btn {
            grid-column: 1 / -1;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
            transition: all 0.3s;
            width: 200px;
            margin: 10px auto;
        }
        
        .refresh-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-left">
            üìä Anomaly Detection System
        </div>
        <div class="nav-right">
            <button class="theme-toggle" onclick="toggleDarkMode()" title="Toggle dark mode">üåô</button>
        </div>
    </nav>
    
    <div class="dashboard">
        <div class="header">
            <h1>üìä Real-Time Anomaly Detection</h1>
            <p>Live monitoring and analysis of anomalies across multiple data streams</p>
        </div>
        
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <h3>System Status</h3>
                <div class="value">
                    <span class="status-indicator"></span><span id="statusText">ACTIVE</span>
                </div>
            </div>
            
            <div class="stat-card">
                <h3>Total Anomalies (24h)</h3>
                <div class="value" id="totalAnomalies">--</div>
            </div>
            
            <div class="stat-card">
                <h3>Detection Rate</h3>
                <div class="value" id="detectionRate">--</div>
            </div>
            
            <div class="stat-card danger">
                <h3>Critical Alerts</h3>
                <div class="value" id="criticalAlerts">0</div>
            </div>
        </div>
        
        <!-- CPU Monitoring -->
        <div class="card">
            <h2>üíª CPU Usage Monitoring</h2>
            <div class="metric">
                <span class="metric-label">Current Load</span>
                <span class="metric-value" id="cpuLoad">--</span>
            </div>
            <div class="metric">
                <span class="metric-label">Anomalies Detected</span>
                <span class="metric-value alert" id="cpuAnomalies">--</span>
            </div>
            <div class="metric">
                <span class="metric-label">Alert Threshold</span>
                <span class="metric-value">85%</span>
            </div>
        </div>
        
        <!-- Network Monitoring -->
        <div class="card">
            <h2>üåê Network Traffic Analysis</h2>
            <div class="metric">
                <span class="metric-label">Current Bandwidth</span>
                <span class="metric-value" id="networkBandwidth">--</span>
            </div>
            <div class="metric">
                <span class="metric-label">Anomalies Detected</span>
                <span class="metric-value alert" id="networkAnomalies">--</span>
            </div>
            <div class="metric">
                <span class="metric-label">Average Rate</span>
                <span class="metric-value" id="networkAvg">--</span>
            </div>
        </div>
        
        <!-- Sensor Data -->
        <div class="card">
            <h2>üå°Ô∏è Sensor Data (Temperature)</h2>
            <div class="metric">
                <span class="metric-label">Current Temp</span>
                <span class="metric-value" id="sensorTemp">--</span>
            </div>
            <div class="metric">
                <span class="metric-label">Anomalies Detected</span>
                <span class="metric-value" id="sensorAnomalies">--</span>
            </div>
            <div class="metric">
                <span class="metric-label">Safe Range</span>
                <span class="metric-value">15-30¬∞C</span>
            </div>
        </div>
        
        <!-- Financial Data -->
        <div class="card">
            <h2>üìà Financial Data (Stock Prices)</h2>
            <div class="metric">
                <span class="metric-label">Current Price</span>
                <span class="metric-value" id="stockPrice">--</span>
            </div>
            <div class="metric">
                <span class="metric-label">Anomalies Detected</span>
                <span class="metric-value alert" id="stockAnomalies">--</span>
            </div>
            <div class="metric">
                <span class="metric-label">Change (24h)</span>
                <span class="metric-value" id="stockChange">--</span>
            </div>
        </div>
        
        <!-- Detection Methods -->
        <div class="card">
            <h2>‚öôÔ∏è Active Detection Methods</h2>
            <div class="metric">
                <span class="metric-label">Statistical (Z-Score)</span>
                <span class="status-indicator"></span>ACTIVE
            </div>
            <div class="metric">
                <span class="metric-label">Isolation Forest</span>
                <span class="status-indicator"></span>ACTIVE
            </div>
            <div class="metric">
                <span class="metric-label">Local Outlier Factor</span>
                <span class="status-indicator"></span>READY
            </div>
        </div>
        
        <!-- Performance -->
        <div class="card">
            <h2>‚ö° System Performance</h2>
            <div class="metric">
                <span class="metric-label">Processing Speed</span>
                <span class="metric-value" id="procSpeed">--</span>
            </div>
            <div class="metric">
                <span class="metric-label">Detection Accuracy</span>
                <span class="metric-value" id="accuracy">--</span>
            </div>
            <div class="metric">
                <span class="metric-label">Uptime</span>
                <span class="metric-value" id="uptime">--</span>
            </div>
        </div>
        
        <!-- Trends Chart -->
        <div class="chart-container">
            <h2 style="margin-bottom: 10px; color: #333;">üìä Anomaly Trends (24h)</h2>
            <canvas id="trendsChart"></canvas>
        </div>
        
        <button class="refresh-btn" onclick="refreshDashboard()">üîÑ Refresh Dashboard</button>
    </div>
    
    <script>
        let trendsChart = null;
        let totalAnomaliesCount = 0;
        
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            document.querySelector('nav').classList.toggle('dark-mode');
            document.querySelector('.theme-toggle').textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }
        
        if (localStorage.getItem('darkMode') === 'true') {
            toggleDarkMode();
        }
        
        function getRandomData(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        
        function getRandomFloat(min, max) {
            return (Math.random() * (max - min) + min).toFixed(2);
        }
        
        function updateDashboard() {
            const cpuVal = getRandomData(20, 95);
            document.getElementById('cpuLoad').textContent = cpuVal + '%';
            document.getElementById('cpuAnomalies').textContent = getRandomData(5, 15);
            
            const netBand = getRandomData(150, 350);
            document.getElementById('networkBandwidth').textContent = netBand + ' Mbps';
            document.getElementById('networkAnomalies').textContent = getRandomData(4, 12);
            document.getElementById('networkAvg').textContent = getRandomData(200, 300) + ' Mbps';
            
            const tempVal = getRandomFloat(18, 28);
            document.getElementById('sensorTemp').textContent = tempVal + '¬∞C';
            document.getElementById('sensorAnomalies').textContent = getRandomData(2, 8);
            
            const priceVal = getRandomFloat(150, 165);
            document.getElementById('stockPrice').textContent = '$' + priceVal;
            const priceChange = getRandomFloat(-5, 5);
            document.getElementById('stockChange').textContent = (priceChange > 0 ? '+' : '') + priceChange + '%';
            document.getElementById('stockAnomalies').textContent = getRandomData(10, 20);
            
            document.getElementById('procSpeed').textContent = getRandomFloat(0.8, 1.5) + 's';
            document.getElementById('accuracy').textContent = getRandomData(92, 99) + '%';
            document.getElementById('uptime').textContent = '99.9' + getRandomData(0, 9) + '%';
            
            totalAnomaliesCount += getRandomData(5, 15);
            document.getElementById('totalAnomalies').textContent = totalAnomaliesCount;
            document.getElementById('detectionRate').textContent = getRandomFloat(5, 12) + '%';
            document.getElementById('criticalAlerts').textContent = getRandomData(0, 3);
            
            updateTrendsChart();
        }
        
        function updateTrendsChart() {
            const ctx = document.getElementById('trendsChart').getContext('2d');
            
            const labels = [];
            for (let i = 23; i >= 0; i--) {
                const hour = new Date();
                hour.setHours(hour.getHours() - i);
                labels.push(hour.getHours() + ':00');
            }
            
            const generateTrendData = () => {
                const data = [];
                let baseValue = 15;
                for (let i = 0; i < 24; i++) {
                    baseValue += getRandomData(-5, 5);
                    data.push(Math.max(5, baseValue));
                }
                return data;
            };
            
            const chartData = {
                labels: labels,
                datasets: [
                    {
                        label: 'Statistical Detector',
                        data: generateTrendData(),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        borderWidth: 2,
                        fill: true
                    },
                    {
                        label: 'Isolation Forest',
                        data: generateTrendData(),
                        borderColor: '#764ba2',
                        backgroundColor: 'rgba(118, 75, 162, 0.1)',
                        borderWidth: 2,
                        fill: true
                    }
                ]
            };
            
            if (trendsChart) {
                trendsChart.data = chartData;
                trendsChart.update();
            } else {
                trendsChart = new Chart(ctx, {
                    type: 'line',
                    data: chartData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top',
                                labels: {
                                    color: document.body.classList.contains('dark-mode') ? '#fff' : '#333'
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    color: document.body.classList.contains('dark-mode') ? '#fff' : '#333'
                                }
                            },
                            x: {
                                ticks: {
                                    color: document.body.classList.contains('dark-mode') ? '#fff' : '#333'
                                }
                            }
                        }
                    }
                });
            }
        }
        
        function refreshDashboard() {
            const btn = event.target;
            btn.disabled = true;
            btn.style.opacity = '0.5';
            updateDashboard();
            setTimeout(() => {
                btn.disabled = false;
                btn.style.opacity = '1';
            }, 500);
        }
        
        updateDashboard();
        setInterval(updateDashboard, 30000);
    </script>
</body>
</html>
